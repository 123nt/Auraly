<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mexplore - Contact</title>
    <link href="home.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="contact.css" />
    <link rel="icon" href="audio-waves.png" type="image/x-icon" />
    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script type="text/javascript">
        (function () {
            emailjs.init({
                publicKey: "cRDqXPveqHRWaopHj",
            });
        })();
    </script>
</head>
<body style="background-color: #e4e4d5">
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-content">
            <div class="logo">
                <a href="home.html">
                    <img src="audio-waves.png" alt="Mexplore" class="logo-img">
                    <span>Mexplore</span>
                </a>
            </div>
            <div class="nav-links">
                <a href="home.html">Home</a>
                <a href="about.html">About</a>
                <a href="explore.html">Explore</a>
                <a href="discover.html">Discover</a>
                <a href="contact.html" class="active">Contact</a>
            </div>
            <div class="nav-actions">
                <a href="artish/search.html" class="search-button">
                    <span>Search Music</span>
                    <svg class="search-icon" viewBox="0 0 24 24">
                        <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                    </svg>
                </a>
            </div>
        </div>
    </nav>

    <!-- Content Section -->
    <div class="content">
        <div class="guestbook-container">
            <h2>Guest Book</h2>
            <p>Suggest songs, leave a message, or suggest a video!</p>

            <form id="guestbookForm" onsubmit="sendEmail(event); return false;">
                <label for="name">Your Name:</label>
                <input type="text" id="name" name="name" required />

                <label for="email">Your Email:</label>
                <input type="email" id="email" name="email" required />

                <label for="suggestion">Song Suggestion / Message:</label>
                <textarea id="suggestion" name="suggestion" rows="4" required></textarea>

                <button type="submit">Send Suggestion</button>
            </form>

            <p class="note">All suggestions will be reviewed before adding to the playlist.</p>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <div class="footerbar">
            <p> Mexplore</p>
        </div>
    </div>

    <script>
        function sendEmail(event) {
            event.preventDefault();

            const serviceID = "service_6qfw135"; // Ensure this is correct
            const templateID = "template_7d2fk4h"; // Ensure this is correct

            const name = document.getElementById("name").value;
            const email = document.getElementById("email").value;
            const suggestion = document.getElementById("suggestion").value;

            const templateParams = {
                name: name,
                email: email,
                suggestion: suggestion,
            };

            console.log("Sending email with parameters:", templateParams); // Debug log

            emailjs
                .send(serviceID, templateID, templateParams)
                .then((response) => {
                    console.log("Email sent successfully:", response); // Debug log
                    alert("Suggestion sent successfully!");
                    document.getElementById("guestbookForm").reset();
                })
                .catch((error) => {
                    console.error("Error sending suggestion:", error); // Debug log
                    alert("Failed to send suggestion. Please try again.");
                });
        }

        (function (d, t) {
            var v = d.createElement(t),
                s = d.getElementsByTagName(t)[0];
            v.onload = function () {
                window.voiceflow.chat.load({
                    verify: { projectID: "672f6bcf905199c9a7d490c2" },
                    url: "https://general-runtime.voiceflow.com",
                    versionID: "production",
                });
            };
            v.src = "https://cdn.voiceflow.com/widget/bundle.mjs";
            v.type = "text/javascript";
            s.parentNode.insertBefore(v, s);
        })(document, "script");
    </script>
</body>
</html>
